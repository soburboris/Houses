import * as R from 'ramda'
import {parse} from 'query-string'

export const limit = 21

export const getPaginator = search => {
    let parsedSearch = parse(search)        //Number(R.replace('?page','',search))
    let currentPage= parsedSearch.page ? Number(parsedSearch.page) : 1
    // console.log('parsedSearch', parse(search))
    let offset = currentPage*limit - limit
    return {currentPage, offset}
  
    
}

export const getHouseById = (state, id) => R.prop(id, state.houses) // state.phones[id]

export const getActiveCategoryId = ownProps => R.path(['match', 'params', 'id'], ownProps)

export const getHouses = (state, ownProps) => {
    // const activeCategoryId = getActiveCategoryId(ownProps)

    const applySearch = house => R.contains(
        state.housesPage.search,
        house.product
        //  R.prop('product',house)
    )
    // const applyCategory = item => R.equals(
    //     activeCategoryId,
    //     R.prop('categoryId',item)
    // )         
    const houses = R.compose(
        R.filter(applySearch),
        // R.when(R.always(activeCategoryId),R.filter(applyCategory)),
        R.map(id => getHouseById(state,id))
    )(state.housesPage.ids)

   

    return houses
}







